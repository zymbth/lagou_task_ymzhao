> 姓名：赵跃旻
>
> 手机：13148787915
>
> 邮箱：ymzhaobth@aliyun.com




# 模块二：ES新特性与TypeScript、JS性能优化

## 简答题

### 一、请说出下列最终的执行结果，并解释为什么。
```javascript
var a = [];
for(var i = 0; i < 10; i++) {
	a[i] = function() {
		console.log(i)
	}
}
a[6]()
```
___

**Answer：**
10
var定义的i为全局变量，for循环后，i已经累加到了10。



### 二、请说出下列最终的执行结果，并解释为什么。
```javascript
var tmp = 123;

if(true) {
	console.log(tmp)
	let tmp
}
```
___

**Answer：**
报错，let创建的tmp存在块级作用域内，且不同于var的定义变量提升，let创建的变量tmp必须先定义后引用，否则报错。



### 三、结合ES6新语法，用最简单的方式找出数组中的最小值。
`var arr = [12, 34, 32, 89, 4]`

___

**Answer：**

```javascript
console.log(arr.sort((a,b) => a - b)[0]);
```



### 四、请详细说明var，let，const三种声明变量的方式之间的差别。

**Answer：**

* var与let都是用来声明变量，而const声明常量。
* var只有函数作用域和全局作用域；
* let有块级作用域；
* 当const声明的是引用类型时，其引用不可变，但内容可变。



### 五、请说出下列代码最终输出的结果，并解释为什么。
```javascript
var a = 10;
var obj = {
	a: 20,
	fn () {
		setTimeout(() => {
			console.log(this.a)
		})
	}
}
obj.fn()
```

___

**Answer：**

20
箭头函数内未定义this；obj.fn()，this指向调用它的对象obj。



### 六、简述symbol类型的用途。

**Answer：**

* 可生成匿名的唯一的值；
* 可用于创建对象属性，该属性不可枚举，无法通过for...in遍历，也无法通过Object.getOwnPropertyNames()获取，
* 可用于创建类的私有属性；



### 七、说说什么是浅拷贝，什么是深拷贝？

**Answer：**

* 对于引用类型数据，对它的浅拷贝是拷贝它的引用，和被拷贝的目标指向同一个数据；
* 深拷贝是将该引用类型数据拷贝，和被拷贝的目标指向不同的数据。
* 这种区别是由于引用类型数据的存储位置决定的。



### 八、请简述TypeScript与JavaScript之间的关系。

**Answer：**

* TypeScript是JavaScript的超集，
* 在JavaScript基础上增添了ES6+的各种特性，
* 添加了类型系统用以弥补JavaScript弱语言的缺陷。



### 九、请谈谈你所认为的TypeScript优缺点

**Answer：**

* 优点：
	* 兼容性强，可以最低兼容到ES3；
	* 类型系统可以弥补JavaScript弱语言的缺陷；
	* 作为一门完整的语言，功能强大，生态健全，应用广，前景好。

* 缺点：
	* 相对于JavaScript，多了很多概念，提高了学习成本；
	* 对于周期小的项目，起类型系统及配置会增加成本。



### 十、描述引用计数的工作原理和优缺点。
**Answer：**

* 工作原理：
	* 使用“引用计数器”判断是否回收。引用计数器是对象在内存中被引用的次数，当对象的引用计数为0时立即回收该对象。
* 优点：
	* 发现垃圾时立即回收。
	* 最大限度减少程序暂停
* 缺点：
	* 无法回收循环引用的对象。循环引用下，当对象都不再指向其各自内存中的对象时，它们的引用计数器仍不为0，也就无法被释放并回收。
	* 时间开销大。要维护对象引用计数，修改计数、监听变化、即时回收，需要更多的时间。



### 十一、描述标记整理算法的工作流程。
**Answer：**
* 标记：遍历所有对象，标记当前活动对象（可达对象）
* 清除：先整理当前地址空间，移动对象位置，让它们在内存地址上连续，避免碎片空间。再清除非活动对象。
* 回收



### 十二、描述V8中新生代存储区垃圾回收的流程。
**Answer：**
* 新生代内存区分为两个等大小空间，使用空间为From，空闲空间为To。
* 活动对象存储于From空间，通过标记整理算法，将活动对象拷贝至To。
* 拷贝时，当To内对象在老生代中出现时，将该对象移动到老生代存储区存储；一轮GC还存活的新生代需要晋升至老生代；当To空间使用率超过25%时，将当前新生代对象全部移动到老生代存储区存储。
* 一轮GC完成后，将From完全释放，To内的对象移动到From。



### 十三、描述增量标记算法在何时使用及工作原理。
**Answer：**
* 增量标记算法可用于GC效率优化，减少垃圾回收阻塞程序执行造成的长时间卡顿。
* 工作原理：程序执行到触发垃圾回收时，暂停程序的执行，开始遍历对象（老年代存储区）进行标记。可标记完直接可达对象后，暂停标记，继续执行程序，一会儿后，再标记间接可达对象。如此交替执行，在完成标记后，再去执行清除操作。当前GC完毕后，继续执行程序。
